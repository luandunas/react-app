(this["webpackJsonpreact-projeto-solo"]=this["webpackJsonpreact-projeto-solo"]||[]).push([[0],{15:function(e,t,n){},16:function(e,t,n){},18:function(e,t,n){},19:function(e,t,n){"use strict";n.r(t);var a=n(8),s=n.n(a),r=n(7),c=n.n(r),o=n(9),i=n(2),u=n(3),l=n(5),d=n(4),m=n(1),p=(n(15),n(16),n(0)),h=[{card_number:"1111111111111111",cvv:789,expiry_date:"01/18"},{card_number:"4111111111111234",cvv:123,expiry_date:"01/20"}],j=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(i.a)(this,n);for(var a=arguments.length,s=new Array(a),r=0;r<a;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).state={card_index:-1},e}return Object(u.a)(n,[{key:"formatCurrency",value:function(e){if(/[^0-9]/.test(e.key))e.preventDefault();else if(e.currentTarget.value){var t=e.currentTarget.value.toString();if((t=(t=t.replace(/[\D]+/g,"")).replace(/([0-9]{1})$/g,",$1")).length>=6)for(;/([0-9]{4})[,|.]/g.test(t);)t=(t=t.replace(/([0-9]{1})$/g,",$1")).replace(/([0-9]{3})[,|.]/g,".$1");e.currentTarget.value=t}}},{key:"payUser",value:function(e,t,n){var a=document.getElementById("headerTitle"),s={card_number:h[n].card_number,cvv:h[n].cvv,expiry_date:h[n].expiry_date,destination_user_id:e,value:t};fetch("https://run.mocky.io/v3/533cd5d7-63d3-4488-bf8d-4bb8c751c989",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(s)}).then((function(e){return e.json()})).then((function(e){a.textContent="Recibo de pagamento",e.success?document.getElementsByClassName("modalBody")[0].innerHTML='<p class="paymentStatus">O pagamento foi concluido com sucesso.</p>':document.getElementsByClassName("modalBody")[0].innerHTML='<p class="paymentStatus">O pagamento <strong>n\xe3o</strong> foi concluido com sucesso.</p>'})).catch((function(e){a.textContent="Recibo de pagamento",document.getElementsByClassName("modalBody")[0].innerHTML='<p class="paymentStatus">O pagamento <strong>n\xe3o</strong> foi concluido com sucesso.</p>'}))}},{key:"createModal",value:function(){var e=this;return this.props.show?Object(p.jsxs)("div",{className:"modal",onClick:function(){e.props.onClose()},children:[Object(p.jsxs)("div",{className:"modalHeader",onClick:function(e){return e.stopPropagation()},children:[Object(p.jsxs)("p",{id:"headerTitle",children:["Pagamento para ",Object(p.jsx)("span",{className:"username",children:this.props["data-name"]})]}),Object(p.jsx)("button",{className:"closeBtn",onClick:function(){e.props.onClose()},children:"Fechar"})]}),Object(p.jsxs)("div",{className:"modalBody",onClick:function(e){return e.stopPropagation()},children:[Object(p.jsx)("input",{placeholder:"R$ 0,00",type:"text",onKeyPress:function(t){e.formatCurrency(t)}}),Object(p.jsx)("select",{name:"creditCards",id:"creditCards",children:h.map((function(e,t){return Object(p.jsx)("option",{"data-key":t,value:e.card_number,children:"Cart\xe3o com final ".concat(e.card_number.slice(e.card_number.length-4))},t)}))}),Object(p.jsx)("button",{onClick:function(){var t,n=document.getElementsByTagName("input")[0].value.replace(/[^0-9]/g,"");t=n.length>1?Number(n.substring(0,n.length-2)+"."+n.substring(n.length-2)):Number(n);var a=document.getElementById("creditCards"),s=Number(a.options[a.selectedIndex].getAttribute("data-key"));t?e.payUser(e.props.user_id,t,s):document.getElementsByTagName("input")[0].focus()},children:"Pagar"})]})]}):null}},{key:"render",value:function(){return this.createModal()}}]),n}(m.Component),b=j,f="https://www.mocky.io/v2/5d531c4f2e0000620081ddce",g=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(i.a)(this,n);for(var a=arguments.length,s=new Array(a),r=0;r<a;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).state={users:[],show:!1,modalUsername:"",user_id:0},e.componentDidMount=Object(o.a)(c.a.mark((function t(){var n,a;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch(f);case 2:return n=t.sent,t.next=5,n.json();case 5:a=t.sent,e.setState({users:a});case 7:case"end":return t.stop()}}),t)}))),e}return Object(u.a)(n,[{key:"createLi",value:function(){var e=this;return this.state.users.map((function(t,n){return Object(p.jsxs)("li",{className:"user",id:t.id,"data-name":t.name,children:[Object(p.jsx)("img",{className:"userAvatar",src:t.img,alt:""}),Object(p.jsxs)("div",{className:"userInfo",children:[Object(p.jsxs)("div",{children:[Object(p.jsx)("p",{className:"username",children:t.name}),Object(p.jsxs)("p",{className:"userID",children:["ID: ",t.id," - Username: ",t.username]})]}),Object(p.jsx)("div",{className:"payButton",children:Object(p.jsx)("button",{onClick:function(){e.setState({show:!0,modalUsername:t.name,user_id:t.id})},children:"Pagar"})})]})]},t.id)}))}},{key:"render",value:function(){var e=this;return Object(p.jsxs)("div",{children:[Object(p.jsx)(b,{user_id:this.state.user_id,"data-name":this.state.modalUsername,show:this.state.show,onClose:function(){e.setState({show:!1})}}),Object(p.jsx)("ul",{children:this.createLi()})]})}}]),n}(m.Component),v=g;n(18);s.a.render(Object(p.jsx)(v,{}),document.getElementById("root"))}},[[19,1,2]]]);
//# sourceMappingURL=main.e6b80082.chunk.js.map